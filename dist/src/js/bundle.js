(()=>{"use strict";var e,t=new Uint8Array(16);function n(){if(!e&&!(e="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return e(t)}const a=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,s=function(e){return"string"==typeof e&&a.test(e)};for(var d=[],o=0;o<256;++o)d.push((o+256).toString(16).substr(1));const i=function(e,t,a){var o=(e=e||{}).random||(e.rng||n)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t){a=a||0;for(var i=0;i<16;++i)t[a+i]=o[i];return t}return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(d[e[t+0]]+d[e[t+1]]+d[e[t+2]]+d[e[t+3]]+"-"+d[e[t+4]]+d[e[t+5]]+"-"+d[e[t+6]]+d[e[t+7]]+"-"+d[e[t+8]]+d[e[t+9]]+"-"+d[e[t+10]]+d[e[t+11]]+d[e[t+12]]+d[e[t+13]]+d[e[t+14]]+d[e[t+15]]).toLowerCase();if(!s(n))throw TypeError("Stringified UUID is invalid");return n}(o)};let l=window.Shekel||{};function r(e,t,n,a,s,d,o,i,l,r,c,u){this.id=e,this.brand=t,this.name=n,this.image=a,this.price1=s,this.price2=d,this.vat=o,this.vatpercent=i,this.code=l,this.barcode=r,this.campaign=c,this.quantity=u}l.Utility=l.Utility||{},l.Utility.isMobile=()=>window.matchMedia("only screen and (max-width: 760px)").matches,l.Utility.isLocalStorageAvailable=()=>{const e="test";try{return localStorage.setItem(e,e),localStorage.removeItem(e),!0}catch(e){return!1}},l.Utility.Guid=()=>{};let c={Init:()=>window.ShekelBasket||c.CreateNew(),CreateNew:()=>{window.ShekelBasket={guid:i(),createdDate:new Date,modifiedDate:new Date,basketItems:[],customer:""}},AddItem:e=>{if(!e)return;if(!Number.isInteger(e.quantity))return;const t=ShekelBasket.basketItems.findIndex((t=>t.id==e.id))||-1;t>-1?ShekelBasket.basketItems[t].quantity+=e.quantity:(ShekelBasket.basketItems.push(e),c.getBasketItems())},RemoveItem:e=>{if(!Number.isInteger(e))return;const t=ShekelBasket.basketItems.findIndex((t=>t.id===e));-1!==t&&ShekelBasket.basketItems.splice(t,1)},Clear:()=>{ShekelBasket.basketItems=[]},getBasketItems:()=>ShekelBasket.basketItems};c.Init(),console.log(ShekelBasket),c.AddItem(new r(1,null,"hasan",null,null,null,null,null,null,null,null,10)),c.AddItem(new r(2,null,"dilek",null,null,null,null,null,null,null,null,36)),c.AddItem(new r(2,null,"dilek",null,null,null,null,null,null,null,null,4)),c.AddItem(new r(3,null,"kemal",null,null,null,null,null,null,null,null,10)),c.RemoveItem(1),console.log(ShekelBasket.basketItems)})(),document.addEventListener("DOMContentLoaded",(function(e){const t=document.querySelector("body"),n=document.getElementById("txtSearchProducts"),a=document.getElementById("ulProductSuggestions"),s=document.getElementById("dialogProductQuantity"),d=document.getElementById("divProductSearchSuggestions"),o=document.getElementById("ulBasketItems"),i=document.getElementById("hdnProductId"),l=document.getElementById("productNameSpan"),r=document.getElementById("ddlProductQuantity"),c=document.getElementById("frmAcceptProductQuantity"),u=document.getElementById("btnQuantityDialogAdd"),m=document.getElementById("btnQuantityDialogCancel"),g=document.getElementById("offCanvasOrderCreate");let p,f,h,v=-1;fetch("./Products.json").then((e=>e.json())).then((e=>h=e)),document.addEventListener("keyup",(function(e){s.open||(e=>{if(a.classList.contains("d-none"))return;const t=a.getElementsByTagName("li").length-1;"ArrowDown"===e.code?(v++,p?(p.classList.remove("bg-light"),f=a.getElementsByTagName("li")[v],void 0!==typeof f&&v<=t?p=f:(v=0,p=a.getElementsByTagName("li")[0]),p.classList.add("bg-light")):(v=0,p=a.getElementsByTagName("li")[0],p.classList.add("bg-light"))):"ArrowUp"===e.code&&(p?(p.classList.remove("bg-light"),v--,f=a.getElementsByTagName("li")[v],void 0!==typeof f&&v>=0?p=f:(v=t,p=a.getElementsByTagName("li")[t]),p.classList.add("bg-light")):(v=0,p=a.getElementsByTagName("li")[t],p.classList.add("bg-light"))),p&&p.focus()})(e)}),!1),g.addEventListener("hide.bs.offcanvas",(e=>{if(!d.classList.contains("d-none"))return e.preventDefault()})),t.addEventListener("keydown",(e=>{if("Escape"===e.key){if(s.open)return void m.click();if(!d.classList.contains("d-none"))return console.log("esc clicked, closing product suggestions"),void d.classList.add("d-none");g.classList.contains("show")&&document.querySelector(".btnCloseOffCanvasOrderCreate").click()}})),m.addEventListener("click",(e=>{e.stopPropagation()})),u.addEventListener("click",(e=>{e.stopPropagation()}));const y=e=>{const t=new basketItem(e.dataset.id,e.dataset.brand,e.datset.name,e.dataset.image,il.dataset.price1,e.dataset.price2,et.dataset.vat,e.dataset.vatpercent,e.dataset.code,e.dataset.barcode,e.dataset.campaignid,void 0);document.getElementById("hdnBasketItem").value=JSON.stringify(t),i.value=t.id,l.textContent=t.name,s.showModal(),r.focus()};s.addEventListener("close",(e=>{if("cancel"===s.returnValue)i.value="",r.selectedIndex=0,l.textContent="",n.focus();else if("send"===s.returnValue){c.submit();let e=JSON.parse(hdnBasketItem.value);e.qty=r.value,i.value="",r.value="1",l.textContent="",hdnBasketItem.value="",n.focus(),o.innerHTML+=w(e,"productRow"),UserBasket.Items+=document.querySelector(".toast-body").textContent=`${e.qty} adet ${e.name} sepete eklendi.`,new bootstrap.Toast(document.querySelector(".toast"),{animation:!1,delay:3e3}).show()}return!1})),document.addEventListener("keypress",(e=>{if("Enter"===e.code||"NumpadEnter"===e.code){if(!a.classList.contains("d-none")&&!s.open)return void y(e.target);if(s.open)return document.activeElement===r&&document.querySelector(".btnAddQuantity").click(),!1}})),n.addEventListener("keyup",(function(e){const t=n.value;if(t.length<3)return;d.classList.remove("d-none");const s=n.offsetTop,o=n.offsetHeight;d.style.top=s+o;let i=[],l="";a.innerHTML="",i=h.filter((e=>e.name.toLowerCase().includes(t.toLowerCase()))),i.forEach((e=>{l+=w(e,"search"),a.innerHTML=l}))})),a.addEventListener("click",(e=>{if(e.target.classList.contains("btnAddToBasket")||e.target.parentElement.classList.contains("btnAddToBasket")){const t=e.target.closest("li");y(t)}}));const b=document.getElementById("q"),k=document.getElementById("divSearchSuggestionsWrapper"),E=document.querySelector(".orders"),I=()=>{const e=window.pageYOffset+E.getBoundingClientRect().top;E.setAttribute("style","height:"+(window.innerHeight-e)+"px; overflow-y: auto; overflow-x:hidden;")};I(),window.addEventListener("resize",(e=>I())),b.addEventListener("focus",(function(e){document.getElementById("divSearch").classList.add("show");const t=b.offsetTop-5,n=b.offsetHeight;k.style.top=t+n,k.classList.toggle("d-none")})),window.addEventListener("click",(e=>{"q"===e.target.id||s.open||e.composedPath().includes(k)||k.classList.contains("d-none")||(k.classList.add("d-none"),document.getElementById("divSearch").classList.remove("show"))})),document.querySelectorAll('input[name="searchType"]').forEach((e=>{e.addEventListener("change",(()=>{const t=document.getElementById("divArchiveSearchCheckbox");"searchNew"===e.id?t.classList.remove("d-none"):t.classList.add("d-none")}));const t=document.querySelector("#btnShareOrder"),n=document.querySelector("#errorNotifications");t.addEventListener("click",(async()=>{try{const e={title:"MDN",text:"Learn web development on MDN!",url:"https://developer.mozilla.org"};await navigator.share(e),n.textContent="MDN shared successfully"}catch(e){n.textContent=`Error: ${e}`}}))}));const w=(e,t)=>{let n="search"===t?'<button class="btnAddToBasket btn btn-circle btn-white ms-auto"><i class="fa fa-plus" ></i></button>':`\n    <div class="d-flex align-items-center justify-content-between">\n      <a href="#" class="btnRemoveFromBasket btn btn-circle btn-white bg-soft-danger">\n        <i class="fa fa-trash"></i>\n      </a>\n      <input type="text" class="form-control form-control-sm" value="${e.qty}"/>\n    </div>`;return`<li tabIndex="-1" class="list-group-item mb-2 border-bottom pb-2" data-id="${e.id}" data-brand="${e.brand}" data-name="${e.name}" data-price1="${e.price1/100}" \n          data-price2="${e.price2/100}" \n          data-vat="${e.vat}" \n          data-vat-percent="${e.vatpercent}" \n          data-code="${e.code}" \n          data-image="${e.image}"\n          data-barcode="4645646465464" data-campaignid="2">\n          <div class="d-flex align-items-center justify-content-start">\n            <img src="./${e.image}" data-src="./${e.image}" class="me-2" width="60">\n            <div class="flex-grow-1">\n              <small class="brand">${e.brand}</small> <small class="productcode">${e.code}</small><br/>\n              <span class="productname"><strong>${e.name}</strong></span> <br/><span class="price">Toptan: ${e.price1/100}\n              </span> <span class="price">PSF: ${e.price2/100}</span> <span class="price">KDV: ${e.vat/100} (%${e.vatpercent})</span>\n            </div>\n            ${n}\n          </div>\n          </td>\n        </li>`};document.addEventListener("click",(e=>{e.target!==s&&"productsSearchTextBox"!==e.target.id&&"ddlProductQuantity"!==e.target.id&&(e.composedPath().includes(d)||d.classList.contains("d-none")||d.classList.add("d-none"))}));const L=document.getElementById("ddlCustomers");document.getElementById("orderCreateSelectCustomer"),L.addEventListener("change",(()=>{L.value;const e=L.textContent.trim(),t=document.querySelector("#orderCreateDdlCustomersWrapper");t.classList.add("d-none");const a=document.getElementById("orderCreateCustomerNameTitle"),s=document.createElement("h5");s.classList.add("m-0"),s.style.display="inline-block",s.textContent=e;const d=document.createElement("a");d.href="#",d.classList.add("btn","btn-circle","btn-white","ms-2");const o=document.createElement("i");o.classList.add("fa","fa-times"),d.appendChild(o),a.append(s,d),d.addEventListener("click",(()=>{d.remove(),s.remove(),t.classList.remove("d-none"),document.getElementById("ddlCustomers").options.length=0,document.querySelector(".bg-customer-selection-badge").remove(),n.focus()}))}));for(var B=1;B<=50;B++)E.innerHTML+='<div class="row order">\n               <div class="col-10">\n                 <div class="order p-2">\n                   <div class="form-check form-check-inline order-no">\n                     <input\n                       type="checkbox"\n                       value="false"\n                       class="form-check-input"\n                       name="order-2234"\n                       id="order-2234"\n                     />\n                     <label for="order-2234">#2234</label>\n                   </div>\n                   <span class="order-customer-span">\n                     <strong>\n                       <a href="#" class="">Yusuf Tandoğan Girne Eczanesi (Girne)</a>\n                     </strong>\n                     <span class="order-datetime d-inline d-md-none"><time datetime="2022-08-06T10:32">28.08 @ 10:32</time></span>\n                     <span class="d-none d-md-inline"\n                       > --  Toplam <strong>4</strong> kalem<strong>32</strong> parça\n                       ve<strong> ₺123.45</strong></span\n                     >\n                   </span>\n                   <div class="tags">\n                     \x3c!-- -- kanal --\x3e\n                     <span\n                       class="badge bg-soft-secondary "\n                       title="Sipariş Kanalı"\n                       >#POS</span\n                     >\n                     \x3c!-- -- siparisi alan --\x3e\n                     <span\n                       class="badge bg-soft-info"\n                       title="Siparişi Alan"\n                     >\n                       <a href="#" class="badge-link"\n                         ><i class="bx bxs-user"></i> İrfan Demirkıran</a\n                       >\n                     </span>\n                     \x3c!-- -- durum bilgisi --\x3e\n                     <span class="badge bg-soft-secondary ">\n                       <a href="#" class="badge-link "\n                         ><i class="fa fa-circle-small"></i> Alındı - İşlem\n                         Görmedi</a\n                       >\n                     </span>\n                     \x3c!-- -- odeme bilgisi --\x3e\n                     <span\n                       class="badge bg-soft-secondary "\n                       title="Ödeme Bilgisi"\n                       >kredi kartı - ödendi</span\n                     >\n                   </div>\n                 </div>\n               </div>\n               <div class="col-2 d-flex align-items-center justify-content-end">\n                 <div class="p-2">\n                   <span class="order-datetime me-4 d-none d-md-inline"><time datetime="2022-08-06T10:32">28 Agu</time></span>\n                   <a href="#" class="btn btn-circle btn-white btnOrderDetail">\n                     <i class="fa fa-chevron-right"></i>\n                   </a>\n                 </div>\n               </div>\n             </div><hr/>'}));